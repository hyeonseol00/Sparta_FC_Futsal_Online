generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  userId        String         @id @map("user_id")
  userName      String         @unique @map("user_name")
  userPw        String         @map("user_pw")
  cash          Int            @default(10000) @map("cash")
  matchHistoryA matchHistory[] @relation("userMatches")
  matchHistoryB matchHistory[] @relation("opponentMatches")
  owningPlayer  owningPlayer[]
  record        record?
  team          team[]

  @@map("user")
}

model player {
  playerId     Int            @unique @default(autoincrement()) @map("player_id")
  playerName   String         @map("player_name")
  speed        Int            @map("speed")
  goalDecision Int            @map("goal_decision")
  shootPower   Int            @map("shoot_power")
  defence      Int            @map("defence")
  stamina      Int            @map("stamina")
  grade        Int            @default(1) @map("grade")
  owningPlayer owningPlayer[]
  tournament   tournament[]

  @@id([playerId, grade])
  @@map("player")
}

model owningPlayer {
  owningPlayerId Int    @id @default(autoincrement()) @map("owning_player_id")
  userId         String @map("user_id")
  playerId       Int    @map("player_id")
  grade          Int    @map("grade")
  count          Int    @default(1) @map("count")
  player         player @relation(fields: [playerId, grade], references: [playerId, grade], onDelete: Cascade)
  user           user   @relation(fields: [userId], references: [userId], onDelete: Cascade)
  defender       team[] @relation("DefenderRelation")
  keeper         team[] @relation("KeeperRelation")
  striker        team[] @relation("StrikerRelation")

  @@index([playerId, grade], map: "owning_player_player_id_grade_fkey")
  @@index([userId], map: "owning_player_user_id_fkey")
  @@map("owning_player")
}

model team {
  teamId                                                         Int                @id @default(autoincrement()) @map("team_id")
  userId                                                         String             @map("user_id")
  defenderId                                                     Int                @map("defender_id")
  strikerId                                                      Int                @map("striker_id")
  keeperId                                                       Int                @map("keeper_id")
  matchHistoryAsA                                                matchHistory[]     @relation("teamAMatches")
  matchHistoryAsB                                                matchHistory[]     @relation("teamBMatches")
  defender                                                       owningPlayer       @relation("DefenderRelation", fields: [defenderId], references: [owningPlayerId], onDelete: Cascade)
  keeper                                                         owningPlayer       @relation("KeeperRelation", fields: [keeperId], references: [owningPlayerId], onDelete: Cascade)
  striker                                                        owningPlayer       @relation("StrikerRelation", fields: [strikerId], references: [owningPlayerId], onDelete: Cascade)
  user                                                           user               @relation(fields: [userId], references: [userId], onDelete: Cascade)
  tournament                                                     tournament[]
  tournament_entry_tournament_entry_entry1_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry1_team_idToteam")
  tournament_entry_tournament_entry_entry2_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry2_team_idToteam")
  tournament_entry_tournament_entry_entry3_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry3_team_idToteam")
  tournament_entry_tournament_entry_entry4_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry4_team_idToteam")
  tournament_entry_tournament_entry_entry5_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry5_team_idToteam")
  tournament_entry_tournament_entry_entry6_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry6_team_idToteam")
  tournament_entry_tournament_entry_entry7_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry7_team_idToteam")
  tournament_entry_tournament_entry_entry8_team_idToteam         tournamentEntry[] @relation("tournament_entry_entry8_team_idToteam")
  tournament_match_tournament_match_final_user_a_team_idToteam   tournamentMatch[] @relation("tournament_match_final_user_a_team_idToteam")
  tournament_match_tournament_match_final_user_b_team_idToteam   tournamentMatch[] @relation("tournament_match_final_user_b_team_idToteam")
  tournament_match_tournament_match_quater1_user_a_team_idToteam tournamentMatch[] @relation("tournament_match_quater1_user_a_team_idToteam")
  tournament_match_tournament_match_quater1_user_b_team_idToteam tournamentMatch[] @relation("tournament_match_quater1_user_b_team_idToteam")
  tournament_match_tournament_match_quater2_user_a_team_idToteam tournamentMatch[] @relation("tournament_match_quater2_user_a_team_idToteam")
  tournament_match_tournament_match_quater2_user_b_team_idToteam tournamentMatch[] @relation("tournament_match_quater2_user_b_team_idToteam")
  tournament_match_tournament_match_quater3_user_a_team_idToteam tournamentMatch[] @relation("tournament_match_quater3_user_a_team_idToteam")
  tournament_match_tournament_match_quater3_user_b_team_idToteam tournamentMatch[] @relation("tournament_match_quater3_user_b_team_idToteam")
  tournament_match_tournament_match_quater4_user_a_team_idToteam tournamentMatch[] @relation("tournament_match_quater4_user_a_team_idToteam")
  tournament_match_tournament_match_quater4_user_b_team_idToteam tournamentMatch[] @relation("tournament_match_quater4_user_b_team_idToteam")
  tournament_match_tournament_match_semi1_user_a_team_idToteam   tournamentMatch[] @relation("tournament_match_semi1_user_a_team_idToteam")
  tournament_match_tournament_match_semi1_user_b_team_idToteam   tournamentMatch[] @relation("tournament_match_semi1_user_b_team_idToteam")
  tournament_match_tournament_match_semi2_user_a_team_idToteam   tournamentMatch[] @relation("tournament_match_semi2_user_a_team_idToteam")
  tournament_match_tournament_match_semi2_user_b_team_idToteam   tournamentMatch[] @relation("tournament_match_semi2_user_b_team_idToteam")

  @@index([defenderId], map: "team_defender_id_fkey")
  @@index([keeperId], map: "team_keeper_id_fkey")
  @@index([strikerId], map: "team_striker_id_fkey")
  @@index([userId], map: "team_user_id_fkey")
  @@map("team")
}

model record {
  userId String @id @map("user_id")
  score  Int    @default(1000) @map("score")
  win    Int    @default(0) @map("win")
  lose   Int    @default(0) @map("lose")
  draw   Int    @default(0) @map("draw")
  rank   Int    @map("rank")
  user   user   @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@map("record")
}

model matchHistory {
  matchId      Int      @id @default(autoincrement()) @map("match_id")
  userIdA      String   @map("user_id_a")
  userIdB      String   @map("user_id_b")
  teamIdA      Int      @map("team_id_a")
  teamIdB      Int      @map("team_id_b")
  resultA      String   @map("result_a")
  resultB      String   @map("result_b")
  scoreChangeA Int      @map("score_change_a")
  scoreChangeB Int      @map("score_change_b")
  matchTime    DateTime @default(now()) @map("match_time")
  teamAScore   Int      @map("team_a_score")
  teamBScore   Int      @map("team_b_score")
  teamA        team     @relation("teamAMatches", fields: [teamIdA], references: [teamId])
  teamB        team     @relation("teamBMatches", fields: [teamIdB], references: [teamId])
  userA        user     @relation("userMatches", fields: [userIdA], references: [userId])
  userB        user     @relation("opponentMatches", fields: [userIdB], references: [userId])

  @@index([teamIdA], map: "match_history_team_id_a_fkey")
  @@index([teamIdB], map: "match_history_team_id_b_fkey")
  @@index([userIdA], map: "match_history_user_id_a_fkey")
  @@index([userIdB], map: "match_history_user_id_b_fkey")
  @@map("match_history")
}

model tournament {
  tournamentId        Int               @id @unique(map: "tournament_id_UNIQUE") @default(autoincrement()) @map("tournament_id")
  scheduledTime       DateTime          @db.DateTime(0) @map("scheduled_time")
  winnerTeamId	      Int?				@map("winner_team_id")
  rewardPlayerId      Int				@map("reward_player_id")
  rewardPlayerGrade	  Int				@map("reward_player_grade")
  player              player            @relation(fields: [rewardPlayerId, rewardPlayerGrade], references: [playerId, grade], onDelete: NoAction, onUpdate: NoAction, map: "reward_player_id_fkey")
  team                team?             @relation(fields: [winnerTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "winner_team_id_fkey")
  tournament_entry    tournamentEntry?
  tournament_match    tournamentMatch?

  @@index([rewardPlayerId, rewardPlayerGrade], map: "reward_player_id_fkey_idx")
  @@index([winnerTeamId], map: "winner_team_id_fkey_idx")
}

model tournamentEntry {
  tournamentId                              Int        @id @unique(map: "tournament_id_UNIQUE") @map("tournament_id")
  entry1TeamId                               Int?		@map("entry1_team_id")
  entry2TeamId                               Int?		@map("entry2_team_id")
  entry3TeamId                               Int?		@map("entry3_team_id")
  entry4TeamId                               Int?		@map("entry4_team_id")
  entry5TeamId                               Int?		@map("entry5_team_id")
  entry6TeamId                               Int?		@map("entry6_team_id")
  entry7TeamId                               Int?		@map("entry7_team_id")
  entry8TeamId                               Int?		@map("entry8_team_id")
  entry1Ready                                Int?       @db.TinyInt @map("entry1_ready")
  entry2Ready                                Int?       @db.TinyInt @map("entry2_ready")
  entry3Ready                                Int?       @db.TinyInt @map("entry3_ready")
  entry4Ready                                Int?       @db.TinyInt @map("entry4_ready")
  entry5Ready                                Int?       @db.TinyInt @map("entry5_ready")
  entry6Ready                                Int?       @db.TinyInt @map("entry6_ready")
  entry7Ready                                Int?       @db.TinyInt @map("entry7_ready")
  entry8Ready                                Int?       @db.TinyInt @map("entry8_ready")
  team_tournament_entry_entry1_team_idToteam team?      @relation("tournament_entry_entry1_team_idToteam", fields: [entry1TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry1_team_id_fkey")
  team_tournament_entry_entry2_team_idToteam team?      @relation("tournament_entry_entry2_team_idToteam", fields: [entry2TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry2_team_id_fkey")
  team_tournament_entry_entry3_team_idToteam team?      @relation("tournament_entry_entry3_team_idToteam", fields: [entry3TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry3_team_id_fkey")
  team_tournament_entry_entry4_team_idToteam team?      @relation("tournament_entry_entry4_team_idToteam", fields: [entry4TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry4_team_id_fkey")
  team_tournament_entry_entry5_team_idToteam team?      @relation("tournament_entry_entry5_team_idToteam", fields: [entry5TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry5_team_id_fkey")
  team_tournament_entry_entry6_team_idToteam team?      @relation("tournament_entry_entry6_team_idToteam", fields: [entry6TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry6_team_id_fkey")
  team_tournament_entry_entry7_team_idToteam team?      @relation("tournament_entry_entry7_team_idToteam", fields: [entry7TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry7_team_id_fkey")
  team_tournament_entry_entry8_team_idToteam team?      @relation("tournament_entry_entry8_team_idToteam", fields: [entry8TeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry8_team_id_fkey")
  tournament                                 tournament @relation(fields: [tournamentId], references: [tournamentId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_entry_id_fkey")

  @@index([entry1TeamId], map: "tournament_entry1_team_id_fkey_idx")
  @@index([entry2TeamId], map: "tournament_entry2_team_id_fkey_idx")
  @@index([entry3TeamId], map: "tournament_entry3_team_id_fkey_idx")
  @@index([entry4TeamId], map: "tournament_entry4_team_id_fkey_idx")
  @@index([entry5TeamId], map: "tournament_entry5_team_id_fkey_idx")
  @@index([entry6TeamId], map: "tournament_entry6_team_id_fkey_idx")
  @@index([entry7TeamId], map: "tournament_entry7_team_id_fkey_idx")
  @@index([entry8TeamId], map: "tournament_entry8_team_id_fkey_idx")
  @@map("tournament_entry")
}

model tournamentMatch {
  tournamentId                                       Int        @id @unique(map: "tournament_id_UNIQUE") @map("tournament_id")
  quater1UserATeamId                                 Int?		@map("quater1_user_a_team_id")
  quater1UserBTeamId                                 Int?		@map("quater1_user_b_team_id")
  quater2UserATeamId                                 Int?		@map("quater2_user_a_team_id")
  quater2UserBTeamId                                 Int?		@map("quater2_user_b_team_id")
  quater3UserATeamId                                 Int?		@map("quater3_user_a_team_id")
  quater3UserBTeamId                                 Int?		@map("quater3_user_b_team_id")
  quater4UserATeamId                                 Int?		@map("quater4_user_a_team_id")
  quater4UserBTeamId                                 Int?		@map("quater4_user_b_team_id")
  semi1UserATeamId                                   Int?		@map("semi1_user_a_team_id")
  semi1UserBTeamId                                   Int?		@map("semi1_user_b_team_id")
  semi2UserATeamId                                   Int?		@map("semi2_user_a_team_id")
  semi2UserBTeamId                                   Int?		@map("semi2_user_b_team_id")
  finalUserATeamId                                   Int?		@map("final_user_a_team_id")
  finalUserBTeamId                                   Int?		@map("final_user_b_team_id")
  team_tournament_match_final_user_a_team_idToteam   team?      @relation("tournament_match_final_user_a_team_idToteam", fields: [finalUserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_f_a_team_id_fkey")
  team_tournament_match_final_user_b_team_idToteam   team?      @relation("tournament_match_final_user_b_team_idToteam", fields: [finalUserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_f_b_team_id_fkey")
  tournament                                         tournament @relation(fields: [tournamentId], references: [tournamentId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_id_fkey")
  team_tournament_match_quater1_user_a_team_idToteam team?      @relation("tournament_match_quater1_user_a_team_idToteam", fields: [quater1UserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q1_a_team_id_fkey")
  team_tournament_match_quater1_user_b_team_idToteam team?      @relation("tournament_match_quater1_user_b_team_idToteam", fields: [quater1UserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q1_b_team_id_fkey")
  team_tournament_match_quater2_user_a_team_idToteam team?      @relation("tournament_match_quater2_user_a_team_idToteam", fields: [quater2UserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q2_a_team_id_fkey")
  team_tournament_match_quater2_user_b_team_idToteam team?      @relation("tournament_match_quater2_user_b_team_idToteam", fields: [quater2UserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q2_b_team_id_fkey")
  team_tournament_match_quater3_user_a_team_idToteam team?      @relation("tournament_match_quater3_user_a_team_idToteam", fields: [quater3UserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q3_a_team_id_fkey")
  team_tournament_match_quater3_user_b_team_idToteam team?      @relation("tournament_match_quater3_user_b_team_idToteam", fields: [quater3UserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q3_b_team_id_fkey")
  team_tournament_match_quater4_user_a_team_idToteam team?      @relation("tournament_match_quater4_user_a_team_idToteam", fields: [quater4UserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q4_a_team_id_fkey")
  team_tournament_match_quater4_user_b_team_idToteam team?      @relation("tournament_match_quater4_user_b_team_idToteam", fields: [quater4UserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_q4_b_team_id_fkey")
  team_tournament_match_semi1_user_a_team_idToteam   team?      @relation("tournament_match_semi1_user_a_team_idToteam", fields: [semi1UserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_s1_a_team_id_fkey")
  team_tournament_match_semi1_user_b_team_idToteam   team?      @relation("tournament_match_semi1_user_b_team_idToteam", fields: [semi1UserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_s1_b_team_id_fkey")
  team_tournament_match_semi2_user_a_team_idToteam   team?      @relation("tournament_match_semi2_user_a_team_idToteam", fields: [semi2UserATeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_s2_a_team_id_fkey")
  team_tournament_match_semi2_user_b_team_idToteam   team?      @relation("tournament_match_semi2_user_b_team_idToteam", fields: [semi2UserBTeamId], references: [teamId], onDelete: NoAction, onUpdate: NoAction, map: "tournament_match_s2_b_team_id_fkey")

  @@index([finalUserATeamId], map: "tournament_match_f_a_team_id_fkey_idx")
  @@index([finalUserBTeamId], map: "tournament_match_f_b_team_id_fkey_idx")
  @@index([quater1UserATeamId], map: "tournament_match_q1_a_team_id_fkey_idx")
  @@index([quater1UserBTeamId], map: "tournament_match_q1_b_team_id_fkey_idx")
  @@index([quater2UserATeamId], map: "tournament_match_q2_a_team_id_fkey_idx")
  @@index([quater2UserBTeamId], map: "tournament_match_q2_b_team_id_fkey_idx")
  @@index([quater3UserATeamId], map: "tournament_match_q3_a_team_id_fkey_idx")
  @@index([quater3UserBTeamId], map: "tournament_match_q3_b_team_id_fkey_idx")
  @@index([quater4UserATeamId], map: "tournament_match_q4_a_team_id_fkey_idx")
  @@index([quater4UserBTeamId], map: "tournament_match_q4_b_team_id_fkey_idx")
  @@index([semi1UserATeamId], map: "tournament_match_s1_a_team_id_fkey_idx")
  @@index([semi1UserBTeamId], map: "tournament_match_s1_b_team_id_fkey_idx")
  @@index([semi2UserATeamId], map: "tournament_match_s2_a_team_id_fkey_idx")
  @@index([semi2UserBTeamId], map: "tournament_match_s2_b_team_id_fkey_idx")
  @@index([quater1UserATeamId, quater1UserBTeamId, quater2UserATeamId, quater2UserBTeamId, quater3UserATeamId, quater3UserBTeamId, quater4UserATeamId, quater4UserBTeamId, semi1UserATeamId, semi1UserBTeamId, semi2UserATeamId, semi2UserBTeamId, finalUserATeamId, finalUserBTeamId], map: "tournament_match_team_id_fkey_idx")
  @@map("tournament_match")
}
